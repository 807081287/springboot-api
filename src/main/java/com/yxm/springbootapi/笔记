幂等   就是唯一性

什么场景会产生幂等性问题？
1.表单重复提交问题
2.rpc远程调用的时候网络延迟的时候  可能会有重试机制

如何保证API接口幂等性问题？
使用token保证临时且唯一  （15-120分钟）
分布式session解决方案    使用redis+ token

token如何生成？

token-时间戳


如何使用token解决幂等性问题
步骤：
1.在调用接口之前生成对应的令牌（token）存放在redis中
2.调用接口的时候，将该令牌放入请求头中
3.接口获取对象的令牌 如果能获取到 （就删除该令牌）  就执行相应的业务逻辑


互联网开发平台API安全架构设计
1.如何保证外网开放接口的安全性？
1.1 搭建API网关控制接口访问权限（accesstoken  小公司使用）
1.2 开发平台设计   oauth2.0协议（大公司提供） 安全认证协议（互联网API开发平台  蚂蚁金服  微信公众号  腾讯课堂第三方登录）
认证原理：（appid appsecret access_token openid 回调地址 授权地址）
1.在微信开放平台申请对应的appid信息
2.app生成登录授权链接
3.用户在确认微信登录之后 跳转到回调地址（配置域名权限）
4.获取到授权码Code， 使用授权码获取对应的access_token（调用疼腾讯接口权限）
5.使用access_token + openid 获取用户相关信息（openID  开放userid）
应用场景：第三方登录 授权管理


URL特殊字符转码

对称加密与非对称加密
1.为什么数据要加密？   防止别人抓包分析Http请求  获取明文数据和篡改数据

2.什么是对称加密   加密和解密是同一个密钥  在加解密过程中  使用同一个密钥
常见的对称加密方案  （DES AES）  密钥（）
密码使用 MD5 + 加盐

对称加密使用场景： 速度快
后台与后台之间通讯

细谈DES，RSA加密原理
移动App接口安全加密设计
1.https传输
2.使用令牌
3.使用非对称加密   研发人员生成非对称密钥对   服务端保存私钥   客户端保存公钥


什么是非对称加密 ？  私钥和公钥
1.使用第三方工具生成非对称密钥对
2. 公钥加密  私钥解密
目前来说是最安全的加密手段  缺点  效率低     应用场景   第三方支付对接  核心金融机构

基于令牌方式实现接口参数安全传输
1.车享主站调用支付系统提供的生成令牌参数接口  返回参数令牌
2.主站跳转到支付系统使用令牌方式跳转
3.支付系统接受令牌参数获取对应的userid和金额参数
验签 单向加密MD5（加盐）






1.3 采用https加密传输协议
1.4 API接口数字签名
1.5 基于令牌方式发现API接口调用

开发步骤：
1. 使用对应机构的Appid+AppSecret  生成对应的accessToken
2. 使用对应的accesstoken调用第三方接口